language: python
python:
  - "3.6"
install:
  - pip install --upgrade pip
  - pip install flake8
  - pip install -r requirements.txt

#before_script:
#  # stop the build if there are Python syntax errors or undefined names
#  - flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
#  # exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
#  - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics

#jobs:
#  include:
#    - stage: lint
#      name: "Checking Black code formatting..."
#      script: black --check hyperparameter_hunter setup.py
#    - stage: test
#      name: "Running unit tests..."
#      script: python setup.py nosetests

#jobs:
#  include:
#    - stage: flake8
#      name: "Running Flake8 syntax checks..."
#      before_script:
#        # stop the build if there are Python syntax errors or undefined names
#        - flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
#        # exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
#        - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
#    - stage: black
#      name: "Running Black code formatting checks..."
#      before_script:
#        - black --check hyperparameter_hunter setup.py

#jobs:
#  include:
#    - name: "Running Flake8 syntax checks..."
##      before_script:
#      script:
#        # stop the build if there are Python syntax errors or undefined names
#        - flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
#        # exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
#        - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
#    - name: "Running Black code formatting checks..."
##      before_script:
#      script:
#        - black --check hyperparameter_hunter setup.py
#    - name: "Running unit tests..."
#      script:
#        - python setup.py nosetests

jobs:
  include:
    - stage: lint
      name: "Running Flake8 syntax checks (1/2)..."
      # stop the build if there are Python syntax errors or undefined names
      # script: flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
      before_script: flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
    -
      name: "Running Flake8 syntax checks (2/2)..."
      # exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
      # script: flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
      before_script: flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
    -
      name: "Running Black code formatting checks..."
      # script: black --check hyperparameter_hunter setup.py
      before_script: black --check hyperparameter_hunter setup.py
    - stage: test
      name: "Running unit tests..."
      script:
        - python setup.py nosetests

#script:
#  - python setup.py nosetests

#script:
#  # - "make test"
#  - python setup.py nosetests
#  - black --check --verbose hyperparameter_hunter setup.py

#matrix:
#  include:
#  - python: "3.6"
#    script:
#      - make lint
